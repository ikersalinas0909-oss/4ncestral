<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ultra Interactiva ‚Äî Demo</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#7c3aed; --muted:#9aa4b2; --glass: rgba(255,255,255,0.04);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,Segoe UI,system-ui,Arial;color:#e6eef6;background:radial-gradient(1200px 600px at 10% 10%,rgba(124,58,237,0.12),transparent),var(--bg);}
    .wrap{max-width:1100px;margin:28px auto;padding:22px;}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between}
    h1{font-size:20px;margin:0}
    .controls{display:flex;gap:8px;align-items:center}
    button, .chip{background:var(--glass);border:0;padding:8px 12px;border-radius:10px;color:inherit;cursor:pointer}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:18px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:14px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6);min-height:140px;position:relative}
    .card h3{margin:0;margin-bottom:8px;font-size:14px}
    .muted{color:var(--muted);font-size:13px}
    .live-badge{position:absolute;right:12px;top:12px;padding:6px 8px;border-radius:999px;background:linear-gradient(90deg,var(--accent),#2dd4bf);font-weight:600;font-size:12px}

    /* Game bubbles */
    #game{display:flex;flex-direction:column;height:320px;align-items:center;justify-content:center;overflow:hidden}
    #playfield{width:100%;height:100%;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:8px;position:relative}
    .bubble{position:absolute;border-radius:999px;padding:10px 14px;background:var(--accent);color:#051226;font-weight:700;user-select:none;cursor:pointer}

    /* Drawing canvas */
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    input[type=range]{width:110px}

    /* Draggable list */
    .list{display:flex;flex-direction:column;gap:8px}
    .draggable{padding:10px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);cursor:grab}
    .draggable:active{cursor:grabbing}

    footer{margin-top:22px;color:var(--muted);font-size:13px;text-align:center}

    /* Responsive */
    @media(max-width:900px){.grid{grid-template-columns:repeat(2,1fr)} }
    @media(max-width:640px){.grid{grid-template-columns:1fr}}

    /* Light theme */
    .light{--bg:#eef2ff;--card:#ffffff;--accent:#6d28d9;--muted:#475569;color:#071022}
  </style>
</head>
<body>
  <div class="wrap" id="app">
    <header>
      <div>
        <h1>Ultra Interactiva ‚Äî Demo</h1>
        <div class="muted">Una p√°gina con mini-juegos, lienzo, arrastrar, tema y accesos r√°pidos</div>
      </div>
      <div class="controls">
        <button id="themeBtn" title="Cambiar tema">üåó Tema (T)</button>
        <button id="gameBtn" title="Iniciar juego">üéØ Juego (G)</button>
        <button id="drawBtn" title="Activar lienzo">‚úèÔ∏è Lienzo (D)</button>
        <div class="chip" id="helpBtn">‚ùì Atajos</div>
      </div>
    </header>

    <div class="grid">
      <div class="card" id="gameCard">
        <div class="live-badge">Mini-juego</div>
        <h3>Pop Bubbles</h3>
        <div class="muted">Haz click en las burbujas r√°pido para sumar puntos.</div>
        <div id="game" style="margin-top:10px">
          <div id="playfield"></div>
        </div>
        <div style="display:flex;gap:8px;margin-top:10px;align-items:center">
          <div class="muted">Puntaje:</div><div id="score">0</div>
          <button id="restart" style="margin-left:auto">Reiniciar</button>
        </div>
      </div>

      <div class="card" id="drawCard">
        <h3>Canvas ‚Äî Dibuja y descarga</h3>
        <div class="muted">Herramientas b√°sicas, cambia grosor y color. Presiona 'D' para alternar.</div>
        <div class="toolbar">
          <label class="muted">Color <input type="color" id="color" value="#7c3aed"></label>
          <label class="muted">Grosor <input type="range" id="size" min="1" max="40" value="6"></label>
          <button id="clear">Limpiar</button>
          <button id="save">Descargar PNG</button>
        </div>
        <canvas id="canvas" width="600" height="220" style="display:block;margin-top:8px;border-radius:8px;width:100%;background:linear-gradient(90deg,rgba(255,255,255,0.02),transparent);"></canvas>
      </div>

      <div class="card" id="todoCard">
        <h3>Lista interactiva (arrastrable)</h3>
        <div class="muted">Arrastra para reordenar ‚Äî los cambios se guardan localmente.</div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <input id="newItem" placeholder="Agregar tarea..." style="flex:1;padding:8px;border-radius:8px;border:0;background:var(--glass)">
          <button id="addItem">A√±adir</button>
        </div>
        <div class="list" id="todoList" style="margin-top:10px"></div>
      </div>

      <div class="card" id="dragCard">
        <h3>Explora ‚Äî Elementos arrastrables</h3>
        <div class="muted">Arrastra los bloques por la tarjeta.</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
          <div class="draggable" draggable="true">üîµ Bloque A</div>
          <div class="draggable" draggable="true">üü¢ Bloque B</div>
          <div class="draggable" draggable="true">üü† Bloque C</div>
        </div>
      </div>

      <div class="card" id="controlsCard">
        <h3>Personaliza</h3>
        <div class="muted">Cambia colores principales y genera confetti.</div>
        <div style="display:flex;gap:8px;align-items:center;margin-top:8px">
          <label class="muted">Color principal <input id="primary" type="color" value="#7c3aed"></label>
          <button id="confetti">üéâ Confetti</button>
        </div>
        <div style="margin-top:10px" class="muted">Prueba atajos: T tema ‚Äî G juego ‚Äî D lienzo</div>
      </div>

      <div class="card" id="infoCard">
        <h3>Accesos r√°pidos y tips</h3>
        <div class="muted">Usa el teclado para alternar m√≥dulos o guarda tu dibujo cuando termines.</div>
        <ul>
          <li class="muted">T = Tema</li>
          <li class="muted">G = Empezar juego</li>
          <li class="muted">D = Lienzo</li>
        </ul>
      </div>

    </div>

    <footer>Hecho con ‚ù§Ô∏è ‚Äî Prueba, modifica y copia lo que quieras.</footer>
  </div>

  <script>
    // --- Theme toggle ---
    const root = document.documentElement;
    const themeBtn = document.getElementById('themeBtn');
    function setTheme(light){
      document.body.classList.toggle('light', !!light);
      localStorage.setItem('ui_light', !!light);
    }
    themeBtn.addEventListener('click', ()=> setTheme(!document.body.classList.contains('light')));
    setTheme(localStorage.getItem('ui_light')==='true');

    // Primary color live change
    document.getElementById('primary').addEventListener('input', e=>{
      document.documentElement.style.setProperty('--accent', e.target.value);
      document.getElementById('color').value = e.target.value;
    });

    // --- Game: pop bubbles ---
    const playfield = document.getElementById('playfield');
    const scoreEl = document.getElementById('score');
    let score = 0, gameInterval, bubbles = [];
    function spawnBubble(){
      const b = document.createElement('div');
      b.className='bubble';
      const size = 36 + Math.random()*64;
      b.style.width = b.style.height = size+'px';
      b.style.left = (Math.random()*80)+'%';
      b.style.top = (Math.random()*80)+'%';
      b.textContent = Math.floor(1+Math.random()*9);
      playfield.appendChild(b);

      b.addEventListener('click', e=>{ score += parseInt(b.textContent); scoreEl.textContent = score; popEffect(b); });
      bubbles.push(b);
      // auto-remove after 5s
      setTimeout(()=>{ if(b.parentElement) b.remove(); },5200);
    }
    function startGame(){ stopGame(); score=0;scoreEl.textContent=score; gameInterval = setInterval(spawnBubble,500); }
    function stopGame(){ clearInterval(gameInterval); bubbles.forEach(b=>b.remove()); bubbles=[]; }
    document.getElementById('gameBtn').addEventListener('click', ()=> startGame());
    document.getElementById('restart').addEventListener('click', ()=> startGame());

    function popEffect(el){
      const r = el.getBoundingClientRect();
      const pop = document.createElement('div');
      pop.style.position='absolute'; pop.style.left = (el.offsetLeft+el.offsetWidth/2-20)+'px'; pop.style.top = (el.offsetTop+el.offsetHeight/2-20)+'px';
      pop.style.width=pop.style.height='40px'; pop.style.borderRadius='50%'; pop.style.background='radial-gradient(circle,#fff4,#fff0)'; pop.style.opacity=0.95; playfield.appendChild(pop);
      el.remove(); setTimeout(()=>pop.remove(),350);
    }

    // --- Canvas drawing ---
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let drawing=false, last = null;
    function resizeCanvas(){ const rect = canvas.getBoundingClientRect(); const scale = devicePixelRatio||1; canvas.width = Math.floor(rect.width*scale); canvas.height = Math.floor(rect.height*scale); canvas.style.height = rect.height+'px'; ctx.scale(scale,scale); redrawFromStorage(); }
    window.addEventListener('resize', ()=>{ resizeCanvas(); }); resizeCanvas();

    document.getElementById('color').addEventListener('input', e=> ctx.strokeStyle = e.target.value);
    document.getElementById('size').addEventListener('input', e=> ctx.lineWidth = e.target.value);
    ctx.lineWidth = 6; ctx.lineCap='round'; ctx.strokeStyle = '#7c3aed';

    function pointerPos(ev){ const rect = canvas.getBoundingClientRect(); return {x: ev.clientX - rect.left, y: ev.clientY - rect.top}; }
    canvas.addEventListener('pointerdown', e=>{ drawing=true; last=pointerPos(e); });
    canvas.addEventListener('pointermove', e=>{ if(!drawing) return; const p = pointerPos(e); ctx.beginPath(); ctx.moveTo(last.x,last.y); ctx.lineTo(p.x,p.y); ctx.stroke(); last = p; });
    canvas.addEventListener('pointerup', ()=>{ drawing=false; saveCanvas(); });
    document.getElementById('clear').addEventListener('click', ()=>{ ctx.clearRect(0,0,canvas.width,canvas.height); saveCanvas();});
    document.getElementById('save').addEventListener('click', ()=>{ const link = document.createElement('a'); link.download='dibujo.png'; link.href = canvas.toDataURL(); link.click(); });

    function saveCanvas(){ try{ localStorage.setItem('drawing', canvas.toDataURL()); }catch(e){}
    }
    function redrawFromStorage(){ const data = localStorage.getItem('drawing'); if(!data) return; const img = new Image(); img.onload = ()=>{ ctx.clearRect(0,0,canvas.width,canvas.height); ctx.drawImage(img,0,0,canvas.width/canvas.getContext('2d').canvas.clientWidth*img.width,canvas.height);}; img.src = data; }

    // --- Todo list with drag reorder ---
    const todoList = document.getElementById('todoList');
    const newItem = document.getElementById('newItem');
    function renderTodos(){ todoList.innerHTML=''; const arr = JSON.parse(localStorage.getItem('todos')||'[]'); arr.forEach((t,i)=>{
      const el = document.createElement('div'); el.className='draggable'; el.draggable=true; el.textContent = t;
      el.addEventListener('dragstart', e=>{ e.dataTransfer.setData('text/plain', i); el.style.opacity=0.4; });
      el.addEventListener('dragend', ()=> el.style.opacity='');
      el.addEventListener('dragover', e=> e.preventDefault());
      el.addEventListener('drop', e=>{ const from = parseInt(e.dataTransfer.getData('text/plain')); const to = i; reorder(from,to); });
      todoList.appendChild(el);
    }); }
    function reorder(from,to){ const arr = JSON.parse(localStorage.getItem('todos')||'[]'); const [item] = arr.splice(from,1); arr.splice(to,0,item); localStorage.setItem('todos', JSON.stringify(arr)); renderTodos(); }
    document.getElementById('addItem').addEventListener('click', ()=>{ const v = newItem.value.trim(); if(!v) return; const arr = JSON.parse(localStorage.getItem('todos')||'[]'); arr.push(v); localStorage.setItem('todos', JSON.stringify(arr)); newItem.value=''; renderTodos(); });
    renderTodos();

    // --- Simple confetti ---
    function confettiBurst(){ const n=30; for(let i=0;i<n;i++){ const p = document.createElement('div'); p.style.position='fixed'; p.style.left = (50 + (Math.random()-0.5)*60)+'%'; p.style.top = '30%'; p.style.width='10px'; p.style.height='14px'; p.style.background = ['#f97316','#fb7185','#60a5fa','#7c3aed'][Math.floor(Math.random()*4)]; p.style.transform = 'rotate('+Math.random()*360+'deg)'; p.style.borderRadius='2px'; p.style.zIndex=9999; document.body.appendChild(p); const dx = (Math.random()-0.5)*800; const dy = 600 + Math.random()*200; p.animate([{transform:'translate(0,0) rotate(0deg)', opacity:1},{transform:'translate('+dx+'px,'+dy+'px) rotate(720deg)', opacity:0}],{duration:1500+Math.random()*800,easing:'cubic-bezier(.2,.7,.2,1)'}).onfinish = ()=>p.remove(); } }
    document.getElementById('confetti').addEventListener('click', confettiBurst);

    // --- Dragging helpers for the draggable blocks (simple) ---
    document.querySelectorAll('.draggable').forEach(el=>{
      el.addEventListener('dragstart', e=> e.dataTransfer.setData('text/plain', el.textContent));
    });

    // --- Keyboard shortcuts ---
    document.addEventListener('keydown', e=>{
      if(e.key.toLowerCase()==='t'){ setTheme(!document.body.classList.contains('light')); }
      if(e.key.toLowerCase()==='g'){ startGame(); }
      if(e.key.toLowerCase()==='d'){ const card = document.getElementById('drawCard'); card.scrollIntoView({behavior:'smooth'}); }
    });

    // Help panel simple
    document.getElementById('helpBtn').addEventListener('click', ()=> alert('Atajos:\nT = Cambiar tema\nG = Iniciar juego\nD = Ir al lienzo\n\nGuarda tu dibujo con el bot√≥n "Descargar PNG".'));

    // Load primary color into accent
    document.documentElement.style.setProperty('--accent', document.getElementById('primary').value);

    // small accessibility touches
    document.querySelectorAll('button').forEach(b=> b.addEventListener('keyup', e=>{ if(e.key===' '||e.key==='Enter') b.click(); }));

    // Prevent runaway intervals when leaving page
    window.addEventListener('beforeunload', ()=> stopGame());

    // Small initial animation
    document.querySelectorAll('.card').forEach((c,i)=> c.animate([{opacity:0,transform:'translateY(8px)'},{opacity:1,transform:'translateY(0)'}],{duration:450,delay:i*70,easing:'cubic-bezier(.2,.9,.3,1)'}));
  </script>
</body>
</html>

