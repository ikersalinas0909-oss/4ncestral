<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aretes Chulos ‚Äî Cat√°logo & Dise√±ador</title>
  <style>
    :root{
      --bg:#fbfbfd; --card:#ffffff; --muted:#6b7280; --accent1:#8a2be2; --accent2:#ff6ec7; --glass: rgba(255,255,255,0.7);
      --shadow: 0 8px 24px rgba(15,15,15,0.06);
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:linear-gradient(180deg,var(--bg),#f6f6fb); color:#111}
    header{position:sticky; top:0; z-index:10; background:linear-gradient(90deg,var(--card),#fff); padding:.8rem 1rem; box-shadow:0 2px 14px rgba(0,0,0,.04)}
    .head-wrap{max-width:1100px;margin:0 auto;display:flex;align-items:center;gap:1rem}
    #logoPreview{width:56px;height:56px;border-radius:12px;object-fit:contain;border:1px solid #eee;background:#fafafa}
    .brand{flex:1;text-align:left}
    .brand h1{margin:0;font-size:1.25rem; background:linear-gradient(90deg,var(--accent1),var(--accent2)); -webkit-background-clip:text;color:transparent}
    nav{display:flex;gap:.6rem}
    nav a{text-decoration:none;padding:.45rem .7rem;border-radius:999px;color:#444;font-weight:600}
    nav a:hover{background:#f4f4fb}

    main{max-width:1100px;margin:1.2rem auto;padding:0 1rem;display:grid;grid-template-columns:1fr 420px;gap:20px}

    /* LEFT: Catalog + products */
    .catalog-wrap{display:flex;flex-direction:column;gap:18px}
    .search-bar{display:flex;gap:.6rem}
    .search-bar input{flex:1;padding:.6rem .8rem;border-radius:10px;border:1px solid #e6e6ee}
    .catalog-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .card{background:var(--card);border-radius:14px;padding:.6rem;border:1px solid #f0f0f6;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:.5rem}
    .card img{width:100%;height:220px;object-fit:cover;border-radius:10px}
    .meta{display:flex;justify-content:space-between;align-items:center;padding-top:.25rem}
    .price{font-weight:700;color:var(--accent1)}
    .actions{display:flex;gap:.5rem}
    .btn{background:#fff;border:1px solid #eee;padding:.5rem .7rem;border-radius:10px;cursor:pointer;font-weight:700}
    .btn.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;border-color:transparent}

    /* RIGHT: Designer */
    .designer-panel{position:sticky;top:1.1rem;background:var(--card);padding:1rem;border-radius:14px;border:1px solid #f0f0f6;box-shadow:var(--shadow);height:max-content}
    .designer-canvas{background:linear-gradient(180deg,#fff,#fbfbff);border-radius:12px;border:1px solid #eee;padding:12px}
    canvas{display:block;width:100%;height:auto;border-radius:10px;background:#fff}
    .controls{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px;margin-top:.7rem}
    .control{display:flex;flex-direction:column;gap:6px}
    label{font-size:.85rem;color:#374151}
    select,input[type=color],input[type=range],input[type=number]{padding:.45rem;border-radius:10px;border:1px solid #e6e6ee;background:#fff}
    .full{grid-column:1/-1}
    .small{padding:.35rem .5rem;border-radius:8px}
    .muted{color:var(--muted);font-size:.9rem}

    footer{max-width:1100px;margin:1.2rem auto;padding:1rem;text-align:center;color:var(--muted)}

    @media (max-width:1080px){ main{grid-template-columns:1fr} .designer-panel{position:relative;top:auto} }
  </style>
</head>
<body>
<header>
  <div class="head-wrap">
    <img id="logoPreview" alt="Tu logo" src="">
    <div class="brand">
      <h1>Aretes Chulos</h1>
      <nav><a href="#catalog">Cat√°logo</a><a href="#designer">Dise√±ador</a></nav>
    </div>
    <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end">
      <label for="logoFile" class="btn">Subir logo</label>
      <input id="logoFile" type="file" accept="image/*" style="display:none">
    </div>
  </div>
</header>

<main>
  <!-- LEFT: Catalog -->
  <div class="catalog-wrap" id="catalog">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <h2 style="margin:.2rem 0">Cat√°logo</h2>
        <div class="muted">Aqu√≠ puedes mostrar los aretes que vendes. Reemplaza las im√°genes y datos por los tuyos.</div>
      </div>
      <div style="display:flex;gap:.5rem;align-items:center">
        <label for="uploadProducts" class="btn">+ Subir fotos</label>
        <input id="uploadProducts" type="file" accept="image/*" multiple style="display:none">
        <button class="btn" id="clearAll">Vaciar</button>
      </div>
    </div>

    <div class="catalog-grid" id="catalogGrid">
      <!-- sample cards -->
    </div>
  </div>

  <!-- RIGHT: Designer -->
  <aside class="designer-panel" id="designer">
    <h3 style="margin:.1rem 0">üé® Dise√±ador de Aretes</h3>
    <div class="muted">Dise√±a con hasta 3 piezas, ajusta colores, patrones y descarga o agrega al cat√°logo.</div>

    <div class="designer-canvas" style="margin-top:.8rem">
      <canvas id="canvas" width="520" height="680" aria-label="Vista previa del arete"></canvas>
    </div>

    <div class="controls">
      <div class="control">
        <label for="pieces">Piezas</label>
        <select id="pieces" class="small">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>

      <div class="control">
        <label for="shape">Molde</label>
        <select id="shape" class="small">
          <option value="circle">C√≠rculo</option>
          <option value="heart">Coraz√≥n</option>
          <option value="star">Estrella</option>
          <option value="teardrop">Gota</option>
          <option value="square">Cuadrado</option>
        </select>
      </div>

      <div class="control">
        <label for="fill">Relleno</label>
        <input id="fill" type="color" value="#ff6ec7">
      </div>

      <div class="control">
        <label for="stroke">Borde</label>
        <input id="stroke" type="color" value="#8a2be2">
      </div>

      <div class="control full">
        <label for="size">Tama√±o base (px)</label>
        <input id="size" type="range" min="80" max="300" value="150">
      </div>

      <div class="control">
        <label for="gap">Separaci√≥n (px)</label>
        <input id="gap" type="range" min="8" max="80" value="24">
      </div>

      <div class="control">
        <label for="strokeW">Grosor borde</label>
        <input id="strokeW" type="range" min="0" max="20" value="6">
      </div>

      <div class="control">
        <label for="pattern">Patr√≥n</label>
        <select id="pattern" class="small">
          <option value="none">Liso</option>
          <option value="stripes">Rayas</option>
          <option value="dots">Puntos</option>
        </select>
      </div>

      <div class="control full">
        <label for="bg">Fondo vista previa</label>
        <input id="bg" type="color" value="#ffffff">
      </div>

      <div style="display:flex;gap:.5rem;margin-top:.6rem" class="full">
        <button class="btn primary" id="download">üì• Descargar PNG</button>
        <button class="btn" id="toCatalog">‚ûï Agregar al cat√°logo</button>
      </div>

      <div style="grid-column:1/-1;margin-top:.6rem" class="muted">Nota: las im√°genes del cat√°logo se guardan en tu navegador (no en servidor). Para ventas reales conecta un backend o sube las im√°genes al repo/servidor.</div>
    </div>
  </aside>
</main>

<footer>¬© <strong>Aretes Chulos</strong> ¬∑ Dise√±ado para ti ¬∑ A√±ade tus fotos reales en el cat√°logo</footer>

<script>
// =========== Config b√°sica ===========
// Cambia este n√∫mero por tu n√∫mero de WhatsApp en formato internacional (sin +), por ejemplo: '5218123456789' para M√©xico.
const WA_NUMBER = '';

// Helpers
const $ = sel => document.querySelector(sel);
const grid = $('#catalogGrid');

// Logo upload
const logoInput = $('#logoFile');
const logoPreview = $('#logoPreview');
logoInput.addEventListener('change', e=>{
  const f = e.target.files[0]; if(!f) return;
  const r = new FileReader(); r.onload = ev => logoPreview.src = ev.target.result; r.readAsDataURL(f);
});

// Catalog sample data (editable)
let products = [
  {id:1, name:'Arete Luna', price:120, img:'https://images.unsplash.com/photo-1545239351-1141bd82e8a6?w=800&q=80'},
  {id:2, name:'Arete Coraz√≥n', price:140, img:'https://images.unsplash.com/photo-1520975915642-3b87e9b2aa9b?w=800&q=80'},
  {id:3, name:'Arete Estrella', price:160, img:'https://images.unsplash.com/photo-1519143939365-0b7c9b4c2f43?w=800&q=80'}
];

function renderCatalog(){
  grid.innerHTML = '';
  products.forEach(p=>{
    const div = document.createElement('div'); div.className='card';
    div.innerHTML = `
      <img src="${p.img}" alt="${p.name}">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div style="font-weight:700">${p.name}</div>
          <div class="muted">ID: ${p.id}</div>
        </div>
        <div style="text-align:right">
          <div class="price">$${p.price}</div>
          <div class="actions">
            <button class="btn" data-id="${p.id}" data-action="like">‚ù§Ô∏è</button>
            <button class="btn primary" data-id="${p.id}" data-action="buy">WhatsApp</button>
          </div>
        </div>
      </div>
    `;
    grid.appendChild(div);
  });
}
renderCatalog();

// Product actions (WhatsApp)
grid.addEventListener('click', e=>{
  const btn = e.target.closest('button'); if(!btn) return;
  const id = btn.getAttribute('data-id'); const action = btn.getAttribute('data-action');
  const prod = products.find(x=>String(x.id)===String(id)); if(!prod) return;
  if(action==='like'){ alert('Guardado en favoritos (simulado): '+prod.name); }
  else if(action==='buy'){
    if(!WA_NUMBER){
      const txt = encodeURIComponent(`Hola! Estoy interesado en ${prod.name} (ID ${prod.id}). ¬øEst√° disponible?`);
      // abrir WhatsApp web con mensaje vac√≠o si no hay n√∫mero
      window.open(`https://wa.me/?text=${txt}`, '_blank');
    } else {
      const txt = encodeURIComponent(`Hola! Estoy interesado en ${prod.name} (ID ${prod.id}). ¬øEst√° disponible?`);
      window.open(`https://wa.me/${WA_NUMBER}?text=${txt}`, '_blank');
    }
  }
});

// Upload new product images
const uploadInput = $('#uploadProducts');
$('#uploadProducts').addEventListener('change', e=>{
  const files = Array.from(e.target.files || []);
  if(!files.length) return;
  files.forEach((f,i)=>{
    const reader = new FileReader();
    reader.onload = ev => {
      const id = Date.now() + Math.floor(Math.random()*99);
      products.unshift({id, name:`Nuevo ${id}`, price:100, img:ev.target.result});
      renderCatalog();
    };
    reader.readAsDataURL(f);
  });
});

$('#clearAll').addEventListener('click', ()=>{ if(confirm('Vaciar cat√°logo?')){ products=[]; renderCatalog(); }});

// =========== Designer ===========
const canvas = $('#canvas'); const ctx = canvas.getContext('2d');
const controls = {
  pieces: $('#pieces'), shape: $('#shape'), fill: $('#fill'), stroke: $('#stroke'), size: $('#size'), gap: $('#gap'), strokeW: $('#strokeW'), pattern: $('#pattern'), bg: $('#bg')
};

Object.values(controls).forEach(el=>el.addEventListener('input', draw));

function roundRect(x,y,w,h,r){ if(typeof ctx.roundRect==='function'){ ctx.roundRect(x,y,w,h,r); return; } ctx.beginPath(); ctx.moveTo(x+r,y); ctx.arcTo(x+w,y,x+w,y+h,r); ctx.arcTo(x+w,y+h,x,y+h,r); ctx.arcTo(x,y+h,x,y,r); ctx.arcTo(x,y,x+w,y,r); ctx.closePath(); }

function drawShape(shape,cx,cy,r){ ctx.beginPath(); if(shape==='circle'){ ctx.arc(cx,cy,r,0,Math.PI*2); }
  else if(shape==='square'){ roundRect(cx-r,cy-r,r*2,r*2,Math.min(18,r*0.4)); }
  else if(shape==='teardrop'){ ctx.moveTo(cx,cy-r); ctx.bezierCurveTo(cx+r*1.0,cy-r*0.2,cx+r*0.6,cy+r*1.0,cx,cy+r*1.2); ctx.bezierCurveTo(cx-r*0.6,cy+r*1.0,cx-r*1.0,cy-r*0.2,cx,cy-r); }
  else if(shape==='heart'){ const k=r*0.75; ctx.moveTo(cx, cy + k*0.9); ctx.bezierCurveTo(cx - k*1.6, cy - k*0.3, cx - k*0.6, cy - k*1.3, cx, cy - k*0.4); ctx.bezierCurveTo(cx + k*0.6, cy - k*1.3, cx + k*1.6, cy - k*0.3, cx, cy + k*0.9); }
  else if(shape==='star'){ const spikes=5, outer=r, inner=r*0.45; let rot = Math.PI/2*3; let x=cx,y=cy; ctx.moveTo(cx,cy-outer); for(let i=0;i<spikes;i++){ x = cx + Math.cos(rot)*outer; y = cy + Math.sin(rot)*outer; ctx.lineTo(x,y); rot += Math.PI/spikes; x = cx + Math.cos(rot)*inner; y = cy + Math.sin(rot)*inner; ctx.lineTo(x,y); rot += Math.PI/spikes; } ctx.closePath(); }
}

function patternFill(type,bbox){ if(type==='none') return; ctx.save(); ctx.clip(); ctx.globalAlpha=0.28; ctx.lineWidth=4; ctx.strokeStyle='#000'; if(type==='stripes'){ const step=20; for(let x=bbox.x-bbox.h;x<bbox.x+bbox.h;x+=step){ ctx.beginPath(); ctx.moveTo(x,bbox.y-bbox.h); ctx.lineTo(x+bbox.h*2,bbox.y+bbox.h); ctx.stroke(); }} else if(type==='dots'){ const step=22; for(let y=bbox.y-bbox.h;y<bbox.y+bbox.h;y+=step){ for(let x=bbox.x-bbox.h;x<bbox.x+bbox.h;x+=step){ ctx.beginPath(); ctx.arc(x,y,3,0,Math.PI*2); ctx.fillStyle='#000'; ctx.fill(); } } } ctx.restore(); }

function drawHook(cx, topY, color){ ctx.save(); ctx.strokeStyle=color; ctx.lineWidth=6; ctx.lineCap='round'; ctx.beginPath(); ctx.moveTo(cx, topY); ctx.quadraticCurveTo(cx-12, topY-36, cx-30, topY-12); ctx.stroke(); ctx.beginPath(); ctx.lineWidth=5; ctx.arc(cx, topY+18, 10, 0, Math.PI*2); ctx.stroke(); ctx.restore(); }

function draw(){ const W=canvas.width,H=canvas.height; ctx.clearRect(0,0,W,H); // fondo
  ctx.fillStyle = controls.bg.value||'#fff'; ctx.fillRect(0,0,W,H);
  const cx = W/2; const pieces = parseInt(controls.pieces.value,10); const sizeBase = parseInt(controls.size.value,10); const gap = parseInt(controls.gap.value,10); const strokeW = parseInt(controls.strokeW.value,10);
  // gancho superior
  if(controls.pieces.value!=='0') drawHook(cx, 64, '#8b8b8b');

  // calculo inicio (centrar el conjunto)
  const totalHeight = pieces*sizeBase + (pieces-1)*gap; const startY = Math.max(120, (H - totalHeight)/2);

  for(let i=0;i<pieces;i++){
    const r = sizeBase/2; const y = startY + i*(sizeBase+gap) + r;
    ctx.save(); drawShape(controls.shape.value, cx, y, r);
    // relleno con sutil degradado radial
    const g = ctx.createRadialGradient(cx - r*0.3, y - r*0.4, r*0.1, cx, y, r*1.1);
    g.addColorStop(0, lightenColor(controls.fill.value,0.12)); g.addColorStop(1, controls.fill.value);
    ctx.fillStyle = g; ctx.fill();
    // pattern
    const bbox = {x:cx,y:y,h:r*1.2}; patternFill(controls.pattern.value,bbox);
    // borde
    if(strokeW>0){ ctx.strokeStyle = controls.stroke.value; ctx.lineWidth = strokeW; ctx.stroke(); }
    // peque√±a sombra
    ctx.restore();
    // cadena entre piezas
    if(i < pieces-1){ ctx.beginPath(); ctx.strokeStyle='#cfcfd6'; ctx.lineWidth=2; ctx.moveTo(cx,y + r - 4); ctx.lineTo(cx, y + r + gap - 4); ctx.stroke(); }
  }
}

draw();

// descargar y agregar al cat√°logo
$('#download').addEventListener('click', ()=>{ const link = document.createElement('a'); link.download = 'arete-chulos.png'; link.href = canvas.toDataURL('image/png'); link.click(); });
$('#toCatalog').addEventListener('click', ()=>{ const data = canvas.toDataURL('image/png'); const id = Date.now(); products.unshift({id, name:'Dise√±o '+id, price:0, img:data}); renderCatalog(); alert('Dise√±o agregado al cat√°logo (temporal).'); });

// util: lighten color
function lightenColor(hex, amt){ const c = hex.replace('#',''); const num = parseInt(c,16); let r = (num>>16) + Math.round(255*amt); let g = ((num>>8)&0x00FF) + Math.round(255*amt); let b = (num&0x0000FF) + Math.round(255*amt); r = Math.min(255,r); g = Math.min(255,g); b = Math.min(255,b); return '#'+(r<<16 | g<<8 | b).toString(16).padStart(6,'0'); }

// re-draw on controls
Object.values(controls).forEach(el=>el.addEventListener('input', draw));

// responsive canvas resizer
function resizeCanvas(){ const rect = canvas.parentElement.getBoundingClientRect(); const scale = Math.min(520, rect.width-20); canvas.width = 520; canvas.height = 680; draw(); }
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

</script>
</body>
</html>
